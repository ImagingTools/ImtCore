# Migration Files Overview

This directory contains several files related to the migration of 3rdParty libraries to git submodules. Here's what each file does:

## Documentation Files

### [ACTION_REQUIRED.md](ACTION_REQUIRED.md) ‚≠ê START HERE
**Quick summary and action items for completing the migration.**

- Overview of what has been done
- Step-by-step manual actions needed
- Benefits of the migration
- Rollback plan

**Read this first** to understand what needs to be done.

### [MIGRATION_3RDPARTY_TO_SUBMODULES.md](MIGRATION_3RDPARTY_TO_SUBMODULES.md)
**Comprehensive migration overview and documentation.**

- Complete library list with versions
- Repository naming conventions
- Migration benefits and considerations
- Build system impact analysis
- Links to additional resources

**Read this** for the complete picture.

### [STEP_BY_STEP_MIGRATION.md](STEP_BY_STEP_MIGRATION.md)
**Detailed step-by-step instructions for performing the migration.**

- Phase-by-phase migration process
- Command examples for each step
- Troubleshooting section
- CI/CD update instructions
- Rollback procedures

**Use this** as your migration checklist.

## Script Files

### [create-github-repos.sh](create-github-repos.sh)
**Automates GitHub repository creation using GitHub CLI.**

Requirements:
- GitHub CLI (`gh`) installed and authenticated
- Permissions to create repos in ImagingTools organization

Usage:
```bash
# Preview what will be created
./create-github-repos.sh dry-run

# Create all repositories
./create-github-repos.sh create
```

### [migrate-3rdparty.sh](migrate-3rdparty.sh)
**Prepares library repositories for pushing to GitHub.**

Creates temporary git repositories for each library with:
- Initialized git repository
- Auto-generated README
- Initial commit with library contents

Usage:
```bash
# List all libraries
./migrate-3rdparty.sh list

# Prepare all libraries
./migrate-3rdparty.sh prepare-all

# Prepare a specific library
./migrate-3rdparty.sh prepare boost

# Generate add-submodules script
./migrate-3rdparty.sh generate-script
```

Output: `/tmp/3rdparty-migration/` directory with prepared repositories

### [add-submodules.sh](add-submodules.sh)
**Adds all libraries as git submodules.**

Auto-generated by `migrate-3rdparty.sh generate-script`.

Usage (after repositories are created and populated):
```bash
# Ensure 3rdParty directory is removed first
git rm -rf 3rdParty/

# Add all submodules
./add-submodules.sh

# Initialize
git submodule update --init --recursive
```

## Configuration Files

### [.gitmodules.template](.gitmodules.template)
**Template for the .gitmodules configuration.**

Shows the expected final state of `.gitmodules` file after migration.
This file is created automatically when you run `./add-submodules.sh`.

## Migration Workflow

The recommended workflow is:

1. **Read** `ACTION_REQUIRED.md` for overview
2. **Review** `MIGRATION_3RDPARTY_TO_SUBMODULES.md` for details
3. **Create repositories** using `create-github-repos.sh` or manually
4. **Prepare libraries** using `migrate-3rdparty.sh prepare-all`
5. **Push libraries** to GitHub repositories
6. **Remove 3rdParty** directory
7. **Add submodules** using `add-submodules.sh`
8. **Verify** everything works
9. **Follow** remaining steps in `STEP_BY_STEP_MIGRATION.md`

## Troubleshooting

If you encounter issues:

1. Check `STEP_BY_STEP_MIGRATION.md` troubleshooting section
2. Verify all prerequisites are met (git, gh CLI, permissions)
3. Ensure you're following the steps in order
4. Review script output for error messages

## Files Created During Migration

The migration process creates:

- `/tmp/3rdparty-migration/` - Temporary directory with prepared repositories (can be deleted after push)
- `~/3rdParty-backup-*.tar.gz` - Backup of original 3rdParty directory
- `.gitmodules` - Submodule configuration (replaces .gitmodules.template)

## After Migration

Once migration is complete:

1. Update CI/CD to checkout with submodules
2. Inform all developers about the change
3. Update clone instructions in documentation
4. Remove temporary files and backups (after verification)
5. Delete or archive this migration documentation (optional)

## Need Help?

- Review the comprehensive documentation files
- Check script help: `./migrate-3rdparty.sh help`
- Contact repository maintainers
